(function(e){function t(t){for(var o,a,i=t[0],l=t[1],c=t[2],u=0,m=[];u<i.length;u++)a=i[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&m.push(n[a][0]),n[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],o=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var o={},n={app:0},s=[];function a(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=o,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},2629:function(e,t,r){"use strict";var o=r("d784"),n=r.n(o);n.a},"2ae9":function(e,t,r){},"371c":function(e,t,r){"use strict";var o=r("c33f"),n=r.n(o);n.a},4337:function(e,t,r){},"47e3":function(e,t,r){"use strict";var o=r("2ae9"),n=r.n(o);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],a={name:"app",components:{}},i=a,l=r("2877"),c=Object(l["a"])(i,n,s,!1,null,null,null),d=c.exports,u=r("8c4f"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"loginForm",staticClass:"login-container",attrs:{rules:e.rules,"label-position":"left","label-width":"0px"}},[r("h3",{staticClass:"login_title"},[e._v("系统登录")]),r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),r("el-form-item",{attrs:{prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.userPwd,callback:function(t){e.$set(e.loginForm,"userPwd",t)},expression:"loginForm.userPwd"}})],1),r("el-checkbox",{staticClass:"login_remember",attrs:{"label-position":"left"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.submitClick(t)}}},[e._v("登录")])],1)],1)},p=[],f=(r("ac1f"),r("5319"),r("bc3a")),h=r.n(f),v="",g=function(e,t){return h()({method:"post",url:"".concat(v).concat(e),data:t,headers:{"Content-Type":"application/json"}})},b=function(e,t){return h()({method:"put",url:"".concat(v).concat(e),data:t,headers:{"Content-Type":"application/json"}})},w=function(e){return h()({method:"delete",url:"".concat(v).concat(e)})},U=function(e,t){return h()({method:"get",params:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"".concat(v).concat(e)})},y={data:function(){return{rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0,loginForm:{userName:"admin",userPwd:"123456"},loading:!1}},methods:{submitClick:function(){var e=this;this.loading=!0,g("http://localhost:8080/web/login",e.loginForm).then((function(t){e.loading=!1,console.log(t),200==t.data.statusCode?e.$router.replace({path:"/home"}):e.$alert("登录失败!","失败!")}),(function(t){console.log(t),e.loading=!1,e.$alert("找不到服务器⊙﹏⊙∥!","失败!")}))}}},F=y,x=(r("47e3"),Object(l["a"])(F,m,p,!1,null,"6cb8aa65",null)),$=x.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"home_container"},[r("el-header",[r("div",{staticClass:"home_title"},[e._v("灾情录播平台")])]),r("el-container",[r("el-aside",{attrs:{width:"200px"}},[r("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{"background-color":"#ececec"},attrs:{"default-active":"0",router:""}},[e._l(this.$router.options.routes,(function(t,o){return[t.hidden?e._e():[t.children.length>1?r("el-submenu",{key:o,attrs:{index:o+""}},[r("template",{slot:"title"},[r("i",{class:t.iconCls}),r("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(t){return r("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name))])}))],2):[r("el-menu-item",{key:t.children[0].path,attrs:{index:t.children[0].path}},[r("i",{class:t.children[0].iconCls}),r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.children[0].name))])])]]]}))],2)],1),r("el-container",[r("el-main",[r("router-view")],1),r("el-footer",[e._v("Footer")])],1)],1)],1)},k=[],P={mounted:function(){console.log(this.$router)}},T=P,O=(r("2629"),Object(l["a"])(T,_,k,!1,null,null,null)),C=O.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{gutter:20}},e._l(e.videoOptions,(function(e,t){return r("el-col",{key:t,attrs:{span:8}},[r("VideoPlayer",{attrs:{options:e}})],1)})),1)],1)},N=[],j=(r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"videoPlayer"},[r("video",{ref:"videoPlayer",staticClass:"video-js vjs-big-play-centered"})])}),A=[],S=r("f0e2"),L=(r("fda2"),r("b5c1"),{name:"VideoPlayer",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{player:null}},mounted:function(){this.player=Object(S["a"])(this.$refs.videoPlayer,this.options,(function(){console.log("onPlayerReady",this)}))},beforeDestroy:function(){this.player&&this.player.dispose()}}),E=L,B=(r("e292"),Object(l["a"])(E,j,A,!1,null,"171d0678",null)),M=B.exports,V={data:function(){return{videoOptions:[],liveVideoList:""}},components:{VideoPlayer:M},mounted:function(){var e=this;U("http://localhost:8080/video/live").then((function(t){e.liveVideoList=t.data;var r=!0,o=!1,n=void 0;try{for(var s,a=t.data[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var i=s.value;e.videoOptions.push({controls:!0,height:"200px",sources:[{src:i.url,type:"rtmp/flv"}]})}}catch(l){o=!0,n=l}finally{try{r||null==a.return||a.return()}finally{if(o)throw n}}console.log(e.videoOptions)}),(function(e){console.log(e.data)}))}},R=V,z=(r("7c6c"),Object(l["a"])(R,D,N,!1,null,null,null)),q=z.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{gutter:20}},e._l(e.videoOptions,(function(e,t){return r("el-col",{key:t,attrs:{span:8}},[r("VideoPlayer",{attrs:{options:e}})],1)})),1)],1)},J=[],Z={data:function(){return{videoOptions:[]}},components:{VideoPlayer:M},mounted:function(){var e=this;U("http://localhost:8080/video/record").then((function(t){e.liveVideoList=t.data;var r=!0,o=!1,n=void 0;try{for(var s,a=t.data[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var i=s.value;e.videoOptions.push({controls:!0,height:"200px",sources:[{src:i.fileName,type:"rtmp/flv"}]})}}catch(l){o=!0,n=l}finally{try{r||null==a.return||a.return()}finally{if(o)throw n}}console.log(e.videoOptions)}),(function(e){console.log(e.data)}))}},G=Z,H=(r("371c"),Object(l["a"])(G,I,J,!1,null,null,null)),K=H.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-col",{attrs:{span:3}},[r("el-button",{attrs:{type:"success"},on:{click:e.handleAddUser}},[e._v("添加用户")])],1),r("el-col",{attrs:{span:3}},[r("el-button",{attrs:{type:"danger",disabled:0==e.deleteUsers.length},on:{click:e.handleDeleteUsers}},[e._v("批量删除")])],1)],1),r("el-table",{attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{prop:"userName",label:"姓名",width:"180"}}),r("el-table-column",{attrs:{prop:"userTel",label:"手机号",width:"180"}}),r("el-table-column",{attrs:{prop:"isAdmin",label:"用户身份",formatter:e.isAdmin}}),r("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])},[r("template",{slot:"header"},[r("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],2)],1),r("el-dialog",{attrs:{title:"新增用户",visible:e.addUserDiaLog,width:"30%"},on:{"update:visible":function(t){e.addUserDiaLog=t}}},[r("el-form",{ref:"addUserForm",attrs:{model:e.addUserForm,"status-icon":"",rules:e.addUserDiaLogRules}},[r("el-form-item",{attrs:{label:"用户权限"}},[r("el-select",{attrs:{placeholder:"请选择用户身份"},model:{value:e.addUserForm.isAdmin,callback:function(t){e.$set(e.addUserForm,"isAdmin",t)},expression:"addUserForm.isAdmin"}},[r("el-option",{attrs:{label:"普通用户",value:"0"}}),r("el-option",{attrs:{label:"管理员用户",value:"1"}})],1)],1),r("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[r("el-input",{attrs:{disabled:""==e.addUserForm.isAdmin},model:{value:e.addUserForm.userName,callback:function(t){e.$set(e.addUserForm,"userName",t)},expression:"addUserForm.userName"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.addUserForm.isAdmin,expression:"addUserForm.isAdmin == 0"}],attrs:{label:"手机号",prop:1==e.addUserForm.isAdmin?"":"userTel"}},[r("el-input",{directives:[{name:"show",rawName:"v-show",value:0==e.addUserForm.isAdmin,expression:"addUserForm.isAdmin == 0"}],attrs:{disabled:""==e.addUserForm.isAdmin},model:{value:e.addUserForm.userTel,callback:function(t){e.$set(e.addUserForm,"userTel",t)},expression:"addUserForm.userTel"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"userPwd"}},[r("el-input",{attrs:{type:"password",disabled:""==e.addUserForm.isAdmin},model:{value:e.addUserForm.userPwd,callback:function(t){e.$set(e.addUserForm,"userPwd",t)},expression:"addUserForm.userPwd"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkUserPwd"}},[r("el-input",{attrs:{type:"password",disabled:""==e.addUserForm.isAdmin},model:{value:e.addUserForm.checkUserPwd,callback:function(t){e.$set(e.addUserForm,"checkUserPwd",t)},expression:"addUserForm.checkUserPwd"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addUserDiaLog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser("addUserForm")}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑用户",visible:e.editUserDiaLog,width:"50%"},on:{"update:visible":function(t){e.editUserDiaLog=t}}},[r("el-form",{ref:"editUserForm",attrs:{inline:!0,model:e.editUserForm,rules:e.editUserDiaLogRules}},[r("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[r("el-input",{attrs:{placeholder:"用户名"},model:{value:e.editUserForm.userName,callback:function(t){e.$set(e.editUserForm,"userName",t)},expression:"editUserForm.userName"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.userTelShow,expression:"userTelShow"}],attrs:{label:"手机号",prop:e.userTelShow?"userTel":""}},[r("el-input",{directives:[{name:"show",rawName:"v-show",value:e.userTelShow,expression:"userTelShow"}],attrs:{placeholder:"手机号"},model:{value:e.editUserForm.userTel,callback:function(t){e.$set(e.editUserForm,"userTel",t)},expression:"editUserForm.userTel"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editUserDiaLog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUser("editUserForm")}}},[e._v("确 定")])],1)],1)],1)},W=[],X=(r("a15b"),r("d81d"),{data:function(){var e=this,t=function(e,t,r){console.log("这里是checkUserName"+t);var o=/[0-9a-zA-Z]{2,10}/;o.test(t)?r():r(new Error("用户名必须由2-10位数字和字母组合"))},r=function(e,t,r){console.log("这里是手机号验证");var o=/^1[3-578]\d{9}$/;o.test(t)?r():r(new Error("请输入正确格式的手机号"))},o=function(t,r,o){""===r?o(new Error("请输入密码")):(""!==e.addUserForm.userPwd&&e.$refs.addUserForm.validateField("checkUserPwd"),o())},n=function(t,r,o){""===r?o(new Error("请再次输入密码")):r!==e.addUserForm.userPwd?o(new Error("两次输入密码不一致!")):o()};return{search:"",deleteUsers:[],editUserDiaLog:!1,addUserDiaLog:!1,editUserForm:"",userTelShow:!1,addUserForm:{userName:"",userTel:"",isAdmin:"",userPwd:"",checkUserPwd:""},addUserDiaLogRules:{userName:[{validator:t,trigger:"blur"}],userTel:[{validator:r,trigger:"blur"}],userPwd:[{validator:o,trigger:"blur"}],checkUserPwd:[{validator:n,trigger:"blur"}]},editUserDiaLogRules:{userName:[{validator:t,trigger:"change"}],userTel:[{validator:r,trigger:"change"}]},tableData:[]}},methods:{handleSelectionChange:function(e){this.deleteUsers=e},handleEdit:function(e,t){this.editUserDiaLog=!0,this.editUserForm=t,console.log(this.editUserForm),this.userTelShow=0==this.editUserForm.isAdmin},handleAddUser:function(){this.addUserDiaLog=!0},addUser:function(e){var t=this,r=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;r.addUserDiaLog=!1,g("http://localhost:8080/web/users",r.addUserForm).then((function(e){200==e.data.statusCode?(r.$message({message:e.data.msg,type:"success"}),r.addUserForm={userName:"",userTel:"",isAdmin:"",userPwd:"",checkUserPwd:""},window.eventBus.$emit("userManage","test")):400==e.data.statusCode&&r.$message.error(e.data.msg)}),(function(e){console.log(e),t.$message.error("网络出错")}))}))},editUser:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.editUserDiaLog=!1,b("http://localhost:8080/web/users",t.editUserForm).then((function(e){200==e.data.statusCode?(t.$message({message:e.data.msg,type:"success"}),window.eventBus.$emit("userManage","test")):400==e.data.statusCode&&t.$message.error(e.data.msg)}),(function(e){console.log(e),t.$message.error("网络出错")}))}))},handleDelete:function(e,t){var r=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){w("http://localhost:8080/web/users/"+t.userId).then((function(e){200==e.data.statusCode?(r.$message.success(e.data.msg),window.eventBus.$emit("userManage","test")):r.$message.error(e.data.msg)}),(function(e){console.log(e),r.$message.error("网络出错")}))})).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},isAdmin:function(e,t,r,o){return console.log(e,t,o),"1"==r?"管理员":"0"==r?"普通用户":"无"},handleDeleteUsers:function(){var e=this;this.$confirm("此操作将永久删除所选用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.deleteUsers.map((function(e){return e.userId})).join();U("http://localhost:8080/web/deleteUserList",{ids:t}).then((function(t){console.log(t),e.$message({type:"success",message:"删除成功!"}),window.eventBus.$emit("userManage","test")}),(function(t){console.log(t),e.$message.error("网络出错")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},loadingUsers:function(){var e=this;U("http://localhost:8080/web/users").then((function(t){console.log(t),e.tableData=t.data}),(function(e){console.log(e)}))}},mounted:function(){var e=this;this.loadingUsers(),window.eventBus.$on("userManage",(function(t){console.log("这里是接受事件"+t),e.loadingUsers()}))}}),Y=X,ee=Object(l["a"])(Y,Q,W,!1,null,null,null),te=ee.exports;o["default"].use(u["a"]);var re=[{path:"/",name:"登录",hidden:!0,component:$},{path:"/home",name:"",hidden:!0,component:C},{path:"/home",component:C,iconCls:"fa fa-file-text-o",children:[{path:"/live",name:"直播管理",component:q}]},{path:"/home",component:C,iconCls:"fa fa-file-text-o",children:[{path:"/record",name:"录播管理",component:K}]},{path:"/home",component:C,children:[{path:"/user",name:"用户管理",iconCls:"fa fa-user-o",component:te}]}],oe=new u["a"]({mode:"history",base:"/",routes:re}),ne=oe,se=r("2f62");o["default"].use(se["a"]);var ae=new se["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ie=r("5c96"),le=r.n(ie);r("0fae");o["default"].use(le.a),window.eventBus=new o["default"],o["default"].config.productionTip=!1,new o["default"]({router:ne,store:ae,render:function(e){return e(d)}}).$mount("#app")},"7c6c":function(e,t,r){"use strict";var o=r("ec07"),n=r.n(o);n.a},c33f:function(e,t,r){},d784:function(e,t,r){},e292:function(e,t,r){"use strict";var o=r("4337"),n=r.n(o);n.a},ec07:function(e,t,r){}});
//# sourceMappingURL=app.318b52af.js.map