(function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],o=!0,s=1;s<i.length;s++){var l=i[s];0!==n[l]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var o={},n={app:0},a=[];function r(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=o,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"081f":function(e,t,i){},1:function(e,t){},2629:function(e,t,i){"use strict";var o=i("d784"),n=i.n(o);n.a},"29e0":function(e,t,i){"use strict";var o=i("081f"),n=i.n(o);n.a},"2e2a":function(e,t,i){"use strict";var o=i("4f1d"),n=i.n(o);n.a},"349d":function(e,t,i){"use strict";var o=i("b14f"),n=i.n(o);n.a},"371c":function(e,t,i){"use strict";var o=i("c33f"),n=i.n(o);n.a},"4f1d":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},a=[],r={name:"app",components:{}},s=r,l=i("2877"),c=Object(l["a"])(s,n,a,!1,null,null,null),d=c.exports,u=i("8c4f"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"loginForm",staticClass:"login-container",attrs:{rules:e.rules,"label-position":"left","label-width":"0px"}},[i("h3",{staticClass:"login_title"},[e._v("系统登录")]),i("el-form-item",{attrs:{prop:"account"}},[i("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"手机号"},model:{value:e.loginForm.userTel,callback:function(t){e.$set(e.loginForm,"userTel",t)},expression:"loginForm.userTel"}})],1),i("el-form-item",{attrs:{prop:"checkPass"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.userPwd,callback:function(t){e.$set(e.loginForm,"userPwd",t)},expression:"loginForm.userPwd"}})],1),i("el-checkbox",{staticClass:"login_remember",attrs:{"label-position":"left"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),i("el-form-item",{staticStyle:{width:"100%"}},[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.submitClick(t)}}},[e._v("登录")])],1)],1)},f=[],m=(i("ac1f"),i("5319"),i("bc3a")),h=i.n(m),v="",g=function(e,t){return h()({method:"post",url:"".concat(v).concat(e),data:t,headers:{"Content-Type":"application/json"}})},b=function(e,t){return h()({method:"put",url:"".concat(v).concat(e),data:t,headers:{"Content-Type":"application/json"}})},y=function(e){return h()({method:"delete",url:"".concat(v).concat(e)})},w=function(e,t){return h()({method:"get",params:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"".concat(v).concat(e)})},k={data:function(){return{rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0,loginForm:{userTel:"15516392395",userPwd:"123123"},loading:!1}},methods:{submitClick:function(){var e=this;this.loading=!0,g("/web/login",e.loginForm).then((function(t){e.loading=!1,200==t.data.statusCode?e.$router.replace({path:"/home"}):e.$alert("登录失败!","失败!")}),(function(t){console.log(t),e.loading=!1,e.$alert("找不到服务器⊙﹏⊙∥!","失败!")}))}}},F=k,U=(i("6562"),Object(l["a"])(F,p,f,!1,null,"1b6ec90c",null)),_=U.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"home_container"},[i("el-header",[i("div",{staticClass:"home_title"},[e._v("灾情录播平台")])]),i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{"background-color":"#ececec"},attrs:{"default-active":"0",router:""}},[e._l(this.$router.options.routes,(function(t,o){return[t.hidden?e._e():[t.children.length>1?i("el-submenu",{key:o,attrs:{index:o+""}},[i("template",{slot:"title"},[i("i",{class:t.iconCls}),i("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(t){return i("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name))])}))],2):[i("el-menu-item",{key:t.children[0].path,attrs:{index:t.children[0].path}},[i("i",{class:t.children[0].iconCls}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.children[0].name))])])]]]}))],2)],1),i("el-container",[i("el-main",[i("router-view")],1),i("el-footer",[e._v("Footer")])],1)],1)],1)},x=[],$={mounted:function(){}},C=$,P=(i("2629"),Object(l["a"])(C,V,x,!1,null,null,null)),T=P.exports,L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"success"},on:{click:e.initVideos}},[e._v("确定")])],1),i("el-col",{attrs:{span:2,offset:12}},[i("el-button",{attrs:{type:"success",title:e.patten?"切换地图模式":"切换列表模式",icon:"el-icon-s-operation"},on:{click:function(t){e.patten=!e.patten}}})],1)],1),e.patten?i("div",[i("el-row",{attrs:{gutter:10}},e._l(e.liveVideoList,(function(t,o){return i("el-col",{key:t.videoId,attrs:{span:6}},[i("div",{staticClass:"dislike",on:{click:function(i){return e.dislikeVideo(t,o)}}},[e._v("x")]),i("VideoPlayer",{attrs:{options:{controls:!0,autoplay:!0,muted:!0,fluid:!0,liveui:!0,sources:[{src:t.url,type:"rtmp/flv"}]}}}),i("VideoInfo",{attrs:{videoInfo:t}})],1)})),1)],1):i("div",[i("VideoMap",{attrs:{videoPoints:e.liveVideoList}})],1)],1)},D=[],O=(i("a4d3"),i("e01a"),i("d28b"),i("c975"),i("a434"),i("d3b7"),i("3ca3"),i("ddb0"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"videoPlayer"},[i("video",{ref:"videoPlayer",staticClass:"video-js vjs-big-play-centered"})])}),I=[],M=i("f0e2"),j=(i("fda2"),i("b5c1"),{name:"VideoPlayer",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{player:null}},mounted:function(){this.init()},beforeDestroy:function(){this.player&&this.player.dispose()},methods:{init:function(){this.player=Object(M["a"])(this.$refs.videoPlayer,this.options)}}}),N=j,A=(i("9d1b"),Object(l["a"])(N,O,I,!1,null,"3d905f04",null)),E=A.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("baidu-map",{staticClass:"bm-view",attrs:{center:e.baiduMap.center,"scroll-wheel-zoom":e.baiduMap.scrollWheelZoom,zoom:e.baiduMap.zoom,ak:"MaNFkHxfgMEfEodDwDsB6pbE95pj3dCB"},on:{ready:e.handler}},[e._l(e.videoLists,(function(t){return[i("bm-marker",{key:t.videoId,attrs:{position:{lng:t.lng,lat:t.lat},clicking:!0,animation:"BMAP_ANIMATION_BOUNCE"},on:{click:function(i){return e.clickPoint(t)}}})]})),i("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}})],2),e.videoDialog?[i("el-dialog",{attrs:{title:"视频资源",visible:e.videoDialog,width:"50%"},on:{"update:visible":function(t){e.videoDialog=t}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:12}},[i("VideoPlayer",{attrs:{options:e.options}})],1),i("el-col",{attrs:{span:12}},[i("MapInfo",{attrs:{mapInfo:e.selectVideo}})],1)],1)],1)]:e._e()],2)},R=[],B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-col",{attrs:{span:12}},[i("div",[i("i",{staticClass:"el-icon-user-solid"}),e._v("姓名:")])]),i("el-col",{attrs:{span:12}},[i("div",{domProps:{textContent:e._s(e.videoInfo.user.userName)}})]),i("el-col",{attrs:{span:12}},[i("div",[i("i",{staticClass:"el-icon-phone"}),e._v("手机号:")])]),i("el-col",{attrs:{span:12}},[i("div",{domProps:{textContent:e._s(e.videoInfo.userTel)}})]),i("el-col",{attrs:{span:12}},[i("div",[i("i",{staticClass:"el-icon-add-location"}),e._v("经度:")])]),i("el-col",{attrs:{span:12}},[i("div",{domProps:{textContent:e._s(e.videoInfo.lat)}})]),i("el-col",{attrs:{span:12}},[i("div",[i("i",{staticClass:"el-icon-add-location"}),e._v("纬度:")])]),i("el-col",{attrs:{span:12}},[i("div",{domProps:{textContent:e._s(e.videoInfo.lng)}})])],1)},z=[],J={data:function(){return{videoInfo:this.mapInfo}},props:{mapInfo:{type:Object,default:function(){return{}}}}},H=J,q=(i("29e0"),Object(l["a"])(H,B,z,!1,null,"73e0e7a6",null)),W=q.exports,Z={data:function(){return{baiduMap:{center:{lng:"116.1",lat:"39.820"},zoom:10,scrollWheelZoom:!0},videoLists:this.videoPoints,selectVideo:"",videoDialog:!1,options:{controls:!0,autoplay:!0,muted:!0,fluid:!0,sources:[{src:"",type:"rtmp/flv"}]}}},props:{videoPoints:{type:Array,default:function(){return[]}}},watch:{videoLists:function(e){this.$message.success("当前有"+e.length+"个视频资源"),console.log(e[0].lat),this.baiduMap.center.lat=e.length>0?e[0].lat:"39.820",this.baiduMap.center.lng=e.length>0?e[0].lng:"116.1"}},methods:{clickPoint:function(e){this.videoDialog=!0,this.selectVideo=e,console.log(e),1==e.flag?this.options.sources[0].src=e.url:this.options.sources[0].src=e.videoUrl},handler:function(){this.baiduMap.center.lat=this.videoLists.length>0?this.videoLists[0].lat:"39.820",this.baiduMap.center.lng=this.videoLists.length>0?this.videoLists[0].lng:"116.1"}},mounted:function(){this.$message.success("当前有"+this.videoLists.length+"个视频资源")},components:{VideoPlayer:E,MapInfo:W}},G=Z,Y=(i("2e2a"),Object(l["a"])(G,S,R,!1,null,null,null)),K=Y.exports,Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"videoTitle"},[e._v(e._s(e.video.title))]),i("el-row",{staticClass:"videoFoot"},[i("el-col",{attrs:{span:12}},[i("i",{staticClass:"el-icon-user"}),e._v(e._s(e.video.user.userName))]),i("el-col",{staticClass:"date",attrs:{span:12}},[i("i",{staticClass:"el-icon-date"}),e._v(e._s(e._f("timeFormat")(e.video.startTime)))])],1)],1)},X=[],ee={data:function(){return{video:this.videoInfo}},props:{videoInfo:{type:Object}},filters:{timeFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}}},te=ee,ie=(i("349d"),Object(l["a"])(te,Q,X,!1,null,"2e34b99a",null)),oe=ie.exports,ne={data:function(){return{liveVideoList:[],dislikeVideoList:[],timer:"",title:"",patten:!0}},components:{VideoPlayer:E,VideoMap:K,VideoInfo:oe},methods:{initVideos:function(){var e=this,t={flag:1,title:this.title};g("/web/liveVideos",t).then((function(t){var i=!0,o=!1,n=void 0;try{for(var a,r=t.data[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var s=a.value;-1==JSON.stringify(e.liveVideoList).indexOf(JSON.stringify(s))&&-1==JSON.stringify(e.dislikeVideoList).indexOf(JSON.stringify(s))&&e.liveVideoList.push(s)}}catch(c){o=!0,n=c}finally{try{i||null==r.return||r.return()}finally{if(o)throw n}}for(var l=0;l<e.liveVideoList.length;l++)-1==JSON.stringify(t.data).indexOf(JSON.stringify(e.liveVideoList[l]))&&e.liveVideoList.splice(l,1)}),(function(e){console.log(e.data)}))},dislikeVideo:function(e,t){this.liveVideoList.splice(t,1),this.dislikeVideoList.push(e)}},mounted:function(){this.initVideos()},beforeDestroy:function(){clearInterval(this.timer)}},ae=ne,re=(i("7c6c"),Object(l["a"])(ae,L,D,!1,null,null,null)),se=re.exports,le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.videoFilterFactors.timeRange,callback:function(t){e.$set(e.videoFilterFactors,"timeRange",t)},expression:"videoFilterFactors.timeRange"}})],1),i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.videoFilterFactors.title,callback:function(t){e.$set(e.videoFilterFactors,"title",t)},expression:"videoFilterFactors.title"}})],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"success"},on:{click:e.initVideos}},[e._v("确定")])],1),i("el-col",{attrs:{span:2,offset:4}},[i("el-button",{attrs:{type:"success",title:e.patten?"切换地图模式":"切换列表模式",icon:"el-icon-s-operation"},on:{click:function(t){e.patten=!e.patten}}})],1)],1),e.patten?i("div",[i("el-row",{attrs:{gutter:40}},e._l(e.recordVideoList,(function(e){return i("el-col",{key:e.videoId,attrs:{span:6}},[i("VideoPlayer",{attrs:{options:{controls:!0,autoplay:!0,muted:!0,fluid:!0,sources:[{src:e.videoUrl,type:"rtmp/flv"}]}}}),i("VideoInfo",{attrs:{videoInfo:e}})],1)})),1)],1):i("div",[i("VideoMap",{attrs:{videoPoints:e.recordVideoList}})],1)],1)},ce=[],de={data:function(){return{patten:!0,recordVideoList:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]},videoFilterFactors:{timeRange:"",title:""}}},components:{VideoPlayer:E,VideoMap:K,VideoInfo:oe},methods:{initVideos:function(){var e,t=this;e=null==this.videoFilterFactors.timeRange||""==this.videoFilterFactors.timeRange?{flag:0,title:this.videoFilterFactors.title}:{flag:0,title:this.videoFilterFactors.title,startTime:this.videoFilterFactors.timeRange[0],endTime:this.videoFilterFactors.timeRange[1]},g("/web/videos",e).then((function(e){t.recordVideoList.splice(0,t.recordVideoList.length);var i=!0,o=!1,n=void 0;try{for(var a,r=e.data[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var s=a.value;t.recordVideoList.push(s)}}catch(l){o=!0,n=l}finally{try{i||null==r.return||r.return()}finally{if(o)throw n}}}))}},mounted:function(){this.initVideos()}},ue=de,pe=(i("371c"),Object(l["a"])(ue,le,ce,!1,null,null,null)),fe=pe.exports,me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.videoFilterFactors.timeRange,callback:function(t){e.$set(e.videoFilterFactors,"timeRange",t)},expression:"videoFilterFactors.timeRange"}})],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"success"},on:{click:e.initVideos}},[e._v("确定")])],1),i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"success",disabled:0==e.checkedVideoIds.length},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加标题")])],1),i("el-col",{attrs:{span:2,offset:10}},[i("el-button",{attrs:{type:"success",title:e.patten?"切换地图模式":"切换列表模式",icon:"el-icon-s-operation"},on:{click:function(t){e.patten=!e.patten}}})],1)],1),e.patten?i("div",[i("el-row",{attrs:{gutter:20}},[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),i("el-checkbox-group",{model:{value:e.checkedVideoIds,callback:function(t){e.checkedVideoIds=t},expression:"checkedVideoIds"}},e._l(e.recordVideoList,(function(t){return i("el-col",{key:t.videoId,attrs:{span:6}},[i("el-checkbox",{attrs:{label:t.videoId}},[i("div",{staticStyle:{display:"none"}},[e._v("1")])]),i("VideoPlayer",{attrs:{options:{controls:!0,autoplay:!0,muted:!0,fluid:!0,sources:[{src:t.videoUrl,type:"rtmp/flv"}]}}}),i("VideoInfo",{attrs:{videoInfo:t}})],1)})),1)],1)],1):i("div",[i("VideoMap",{attrs:{videoPoints:e.recordVideoList}})],1),i("el-dialog",{attrs:{title:"添加标题",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addTitle}},[e._v("确 定")])],1)],1)],1)},he=[],ve=(i("a15b"),{data:function(){return{patten:!0,title:"",dialogVisible:!1,isIndeterminate:!0,checkAll:!1,checkedVideoIds:[],recordVideoList:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]},videoFilterFactors:{timeRange:""}}},components:{VideoPlayer:E,VideoMap:K,VideoInfo:oe},methods:{handleCheckAllChange:function(e){var t=[],i=!0,o=!1,n=void 0;try{for(var a,r=this.recordVideoList[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var s=a.value;t.push(s.videoId)}}catch(l){o=!0,n=l}finally{try{i||null==r.return||r.return()}finally{if(o)throw n}}this.checkedVideoIds=e?t:[],this.isIndeterminate=!1},addTitle:function(){console.log(this.checkedVideoIds);var e=this,t=this.checkedVideoIds.join();console.log(t),w("/web/addTitle?ids="+t+"&title="+this.title).then((function(t){console.log(t),e.initVideos()})),this.dialogVisible=!1},initVideos:function(){var e,t=this;console.log(this.videoFilterFactors.timeRange),e=null==this.videoFilterFactors.timeRange||""==this.videoFilterFactors.timeRange?{flag:0}:{flag:0,startTime:this.videoFilterFactors.timeRange[0],endTime:this.videoFilterFactors.timeRange[1]},g("/web/latestVideos",e).then((function(e){t.recordVideoList.splice(0,t.recordVideoList.length);var i=!0,o=!1,n=void 0;try{for(var a,r=e.data[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var s=a.value;t.recordVideoList.push(s)}}catch(l){o=!0,n=l}finally{try{i||null==r.return||r.return()}finally{if(o)throw n}}}),(function(e){console.log(e.data)}))}},mounted:function(){this.initVideos()}}),ge=ve,be=(i("857f"),Object(l["a"])(ge,me,he,!1,null,null,null)),ye=be.exports,we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{type:"success"},on:{click:e.handleAddUser}},[e._v("添加用户")])],1),i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{type:"danger",disabled:0==e.deleteUsers.length},on:{click:e.handleDeleteUsers}},[e._v("批量删除")])],1)],1),i("el-table",{attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"userName",label:"姓名",width:"180"}}),i("el-table-column",{attrs:{prop:"userTel",label:"手机号",width:"180"}}),i("el-table-column",{attrs:{prop:"isAdmin",label:"用户身份",formatter:e.isAdmin}}),i("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])},[i("template",{slot:"header"},[i("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],2)],1),i("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":e.page.pageSizes,"page-size":e.page.limit,total:e.page.total,"current-page":e.page.currentPage},on:{"current-change":e.currentChange,"size-change":e.limitChange}}),i("el-dialog",{attrs:{title:"新增用户",visible:e.addUserDiaLog,width:"30%"},on:{"update:visible":function(t){e.addUserDiaLog=t}}},[i("el-form",{ref:"addUserForm",attrs:{model:e.addUserForm,"status-icon":"",rules:e.addUserDiaLogRules}},[i("el-form-item",{attrs:{label:"用户权限"}},[i("el-select",{attrs:{placeholder:"请选择用户身份"},model:{value:e.addUserForm.isAdmin,callback:function(t){e.$set(e.addUserForm,"isAdmin",t)},expression:"addUserForm.isAdmin"}},[i("el-option",{attrs:{label:"普通用户",value:"0"}}),i("el-option",{attrs:{label:"管理员用户",value:"1"}})],1)],1),i("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[i("el-input",{attrs:{disabled:""==e.addUserForm.isAdmin},model:{value:e.addUserForm.userName,callback:function(t){e.$set(e.addUserForm,"userName",t)},expression:"addUserForm.userName"}})],1),i("el-form-item",{attrs:{label:"手机号",prop:"userTel"}},[i("el-input",{attrs:{disabled:""==e.addUserForm.isAdmin},model:{value:e.addUserForm.userTel,callback:function(t){e.$set(e.addUserForm,"userTel",t)},expression:"addUserForm.userTel"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"userPwd"}},[i("el-input",{attrs:{type:"password",disabled:""==e.addUserForm.isAdmin},model:{value:e.addUserForm.userPwd,callback:function(t){e.$set(e.addUserForm,"userPwd",t)},expression:"addUserForm.userPwd"}})],1),i("el-form-item",{attrs:{label:"确认密码",prop:"checkUserPwd"}},[i("el-input",{attrs:{type:"password",disabled:""==e.addUserForm.isAdmin},model:{value:e.addUserForm.checkUserPwd,callback:function(t){e.$set(e.addUserForm,"checkUserPwd",t)},expression:"addUserForm.checkUserPwd"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addUserDiaLog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUser("addUserForm")}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"编辑用户",visible:e.editUserDiaLog,width:"50%"},on:{"update:visible":function(t){e.editUserDiaLog=t}}},[i("el-form",{ref:"editUserForm",attrs:{inline:!0,model:e.editUserForm,rules:e.editUserDiaLogRules}},[i("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[i("el-input",{attrs:{placeholder:"姓名"},model:{value:e.editUserForm.userName,callback:function(t){e.$set(e.editUserForm,"userName",t)},expression:"editUserForm.userName"}})],1),i("el-form-item",{attrs:{label:"手机号",prop:"userTel"}},[i("el-input",{attrs:{placeholder:"手机号"},model:{value:e.editUserForm.userTel,callback:function(t){e.$set(e.editUserForm,"userTel",t)},expression:"editUserForm.userTel"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editUserDiaLog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUser("editUserForm")}}},[e._v("确 定")])],1)],1)],1)},ke=[],Fe=(i("d81d"),{data:function(){var e=this,t=function(e,t,i){var o=/^[\u4E00-\u9FA5]{2,4}$/;o.test(t)?i():i(new Error("姓名格式不正确"))},i=function(e,t,i){var o=/^1[3-578]\d{9}$/;o.test(t)?i():i(new Error("请输入正确格式的手机号"))},o=function(t,i,o){""===i?o(new Error("请输入密码")):(""!==e.addUserForm.userPwd&&e.$refs.addUserForm.validateField("checkUserPwd"),o())},n=function(t,i,o){""===i?o(new Error("请再次输入密码")):i!==e.addUserForm.userPwd?o(new Error("两次输入密码不一致!")):o()};return{page:{paginationFlag:!1,pageSizes:[6,10,20],total:0,limit:6,currentPage:1},search:"",deleteUsers:[],editUserDiaLog:!1,addUserDiaLog:!1,editUserForm:[],oldUserTel:"",userTelShow:!1,addUserForm:{userName:"",userTel:"",isAdmin:"",userPwd:"",checkUserPwd:""},addUserDiaLogRules:{userName:[{validator:t,trigger:"blur"}],userTel:[{validator:i,trigger:"blur"}],userPwd:[{validator:o,trigger:"blur"}],checkUserPwd:[{validator:n,trigger:"blur"}]},editUserDiaLogRules:{userName:[{validator:t,trigger:"change"}],userTel:[{validator:i,trigger:"change"}]},tableData:[]}},methods:{handleSelectionChange:function(e){this.deleteUsers=e},handleEdit:function(e,t){this.editUserDiaLog=!0,this.editUserForm=t,this.oldUserTel=t.userTel},handleAddUser:function(){this.addUserDiaLog=!0},addUser:function(e){var t=this,i=this;this.$refs[e].validate((function(e){if(!e)return!1;i.addUserDiaLog=!1,g("/web/users",i.addUserForm).then((function(e){200==e.data.statusCode?(i.$message({message:e.data.msg,type:"success"}),i.addUserForm={userName:"",userTel:"",isAdmin:"",userPwd:"",checkUserPwd:""},window.eventBus.$emit("userManage")):400==e.data.statusCode&&i.$message.error(e.data.msg)}),(function(){t.$message.error("网络出错")}))}))},editUser:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.editUserDiaLog=!1,b("/web/users?oldUserTel="+t.oldUserTel,t.editUserForm).then((function(e){200==e.data.statusCode?(t.$message({message:e.data.msg,type:"success"}),window.eventBus.$emit("userManage")):400==e.data.statusCode&&(t.$message.error(e.data.msg),window.eventBus.$emit("userManage"))}),(function(){t.$message.error("网络出错")}))}))},handleDelete:function(e,t){var i=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){y("/web/users/"+t.userTel).then((function(e){200==e.data.statusCode?(i.$message.success(e.data.msg),window.eventBus.$emit("userManage")):i.$message.error(e.data.msg)}),(function(){i.$message.error("网络出错")}))})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},isAdmin:function(e,t,i,o){return"1"==i?"管理员":"0"==i?"普通用户":"无"},handleDeleteUsers:function(){var e=this;this.$confirm("此操作将永久删除所选用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.deleteUsers.map((function(e){return e.userTel})).join();w("/web/deleteUserList",{userTels:t}).then((function(){e.$message({type:"success",message:"删除成功!"}),window.eventBus.$emit("userManage")}),(function(){e.$message.error("网络出错")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},loadingUsers:function(e,t){var i=this,o="/web/users?limit="+e+"&offset="+t;w(o).then((function(e){i.tableData=e.data.users,i.page.total=e.data.total}))},limitChange:function(e){this.page.limit=e;var t=(this.page.currentPage-1)*e;this.loadingUsers(e,t)},currentChange:function(e){this.page.currentPage=e;var t=(e-1)*this.page.limit;this.loadingUsers(this.page.limit,t)}},mounted:function(){var e=this;this.loadingUsers(this.page.limit,0),window.eventBus.$on("userManage",(function(){var t=(e.page.currentPage-1)*e.page.limit;console.log(e.page.limit),console.log(t),e.loadingUsers(e.page.limit,t)}))}}),Ue=Fe,_e=(i("9917"),Object(l["a"])(Ue,we,ke,!1,null,null,null)),Ve=_e.exports;o["default"].use(u["a"]);var xe=[{path:"/",name:"登录",hidden:!0,component:_},{path:"/home",name:"",hidden:!0,component:T},{path:"/home",component:T,iconCls:"fa fa-file-text-o",children:[{path:"/live",name:"直播管理",component:se}]},{path:"/home",name:"录播管理",component:T,iconCls:"fa fa-file-text-o",children:[{path:"/latestrecord",name:"最新录播",component:ye},{path:"/record",name:"历史录播",component:fe}]},{path:"/home",component:T,children:[{path:"/user",name:"用户管理",iconCls:"fa fa-user-o",component:Ve}]}],$e=new u["a"]({mode:"history",base:"/",routes:xe}),Ce=$e,Pe=i("2f62");o["default"].use(Pe["a"]);var Te=new Pe["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Le=i("5c96"),De=i.n(Le);i("0fae");o["default"].use(De.a);var Oe=i("bd0c"),Ie=i.n(Oe);o["default"].use(Ie.a,{ak:"MaNFkHxfgMEfEodDwDsB6pbE95pj3dCB"}),window.eventBus=new o["default"],o["default"].config.productionTip=!1,new o["default"]({router:Ce,store:Te,render:function(e){return e(d)}}).$mount("#app")},6562:function(e,t,i){"use strict";var o=i("a896"),n=i.n(o);n.a},"7c6c":function(e,t,i){"use strict";var o=i("ec07"),n=i.n(o);n.a},"857f":function(e,t,i){"use strict";var o=i("aec9"),n=i.n(o);n.a},9917:function(e,t,i){"use strict";var o=i("a8b4"),n=i.n(o);n.a},"9d1b":function(e,t,i){"use strict";var o=i("e96b"),n=i.n(o);n.a},a896:function(e,t,i){},a8b4:function(e,t,i){},aec9:function(e,t,i){},b14f:function(e,t,i){},c33f:function(e,t,i){},d784:function(e,t,i){},e96b:function(e,t,i){},ec07:function(e,t,i){}});
//# sourceMappingURL=app.112562f5.js.map